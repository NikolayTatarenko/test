друзья Всем привет Вы на канале
pythontoday и сегодня мы с вами напишем
скрипт с помощью которого сможем
генерировать временный e-mail адреса и
получать на них сообщения часть кода
данного скрипта Я использовал при
написании регистратора аккаунтов Мне
нужно было Быстро создавать почтовые
адреса и получать на них одноразовые
пароли я нахожу скрипт весьма полезным
Да и помог он мне заработать ни одну
сотню долларов Надеюсь практика
пригодится И вам раз Вы зритель нашего
канала то знайте что пайтон один из
самых доступных и популярных языков
программирования об этом трубят
абсолютно везде Однако мы все понимаем
что развиваться в этой сфере становится
всё сложнее и Именно поэтому большинство
начинающих разработчиков часто сдаются
для всех наших зрителей которые мечтают
о карьере разработчика Мы представляем
новый курс профессия поэтому разработчик
от онлайн университетов само собой на
курсе вы сможете освоить все навыки с
нуля или прокачаться до уровня для этого
на курсе есть специализация
веб-разработка дата сайнс и девопс
главное что время тут не важно Вы можете
учиться полностью в собственном темпе
ребята из продуктар постарались чтобы
ваше обучение было максимально
комфортным личным ментор построит вам
индивидуальный план обучения и будет
всегда на связи Но самое классное
продукт Star гарантирует трудоустройство
пока вы изучаете курс с вами работает
карьерный центр он проанализирует Ваш
опыт составит продающее резюме и поможет
попасть на первую стажировку вы
совместно будете проходить собеседование
и Вам помогут даже на испытательном
сроке поддержка заканчивается только
после окончательного трудоустройства
если у вас не получится найти работу вам
вернут деньги Если вы всё ещё
сомневаетесь то у вас есть целый месяц
чтобы попробовать профессию не
понравится вам вернут деньги сканируйте
qr-код и получайте скидку в 50% по
промокоду по этом 50 количество
мест ограничено ссылка в описании О'кей
из внешних нам сегодня понадобится
только библиотека request установим её в
нашей виртуальное окружение
и импортируем необходимый для работы
модулей request Рандом
string
Time
и АЭС
создадим четыре функции generate
username которая будет отвечать за
генерацию имени почты
Check mail для проверки входящих писем
Delete mail Как вы уже догадались для
удаления почты
функцию Main в которой будем работать с
созданными ранее функциями и условия
ихнейм равно Main в котором вызываем
функцию Main
[музыка]
первым делом обозначим константу API это
будет ссылка для работы сами сервисом
и создадим список возможных почтовых
доменов
я использую эти три если хотите можете
добавить все ничего сложного здесь нет
ссылку на апе документации я оставлю в
нашем телеграмм канале с кучей ништяков
присоединяйтесь по ссылке в описании
после выберем Рандомный домен используя
модуль Рандом инструкцию
далее пропишем рандомную генерацию имени
для почтового домена будем использовать
словарь из латинских букв в Нижнем
регистре + цифры
вновь используем модуль Рандом и
инструкцию Choice в которую передадим
нашу строку с символами создадим
рандомную генерацию из 10 символов и
склеим их в одну строку Используя метод
Join
теперь каждый раз при вызове функции мы
должны получать рандомно сгенерированную
строку из 10 символов Давайте проверим
обернем код в блок Try except
[музыка]
в блоке Try пока что вызовем только нашу
функцию
и составим почтовый адрес из имени и
домена
распечатаем результат
в except используем класс
это исключение возникающее когда
пользователь нажимает определенные
клавиши прерывания процесса в моем
случае Control C запускаем скрипт
[музыка]
и все окей функция работает чтобы
проверить блок except пропишем цикл
wild.ru
и добавим в него например паузу в 5
секунд запустим скрипт еще раз Как видим
цикл работает
прервём программу зажав Control C
и видим как отрабатывает блок except всё
супер едем дальше
функция Check mail будет принимать один
аргумент сгенерированный нами e-mail
адрес после чего сформируем ссылку к
запросу API по которому мы проверяем
Есть ли письма в ящике
[музыка]
добавим к ссылке кастомные параметры
сначала username достанем его из адреса
почты разобьем по собаке и заберем
нулевой элемент а затем аналогично
достанем
отправим запрос по ссылке
и заберем ответ
обозначим переменную которая будет
возвращать количество элементов в
массиве с данными и если ее значение
будет равно нулю то выведем
информационный Принт что пока Писем нет
а также что проверка происходит каждые 5
секунд её мы реализуем чуть позже
[музыка]
Если же значение не равно нулю то мы
получили какое-то сообщение или
Сообщение вот так выглядят приходящие
данные это список со словарями каждый из
которых представляет собой метаданные
входящего сообщения здесь есть ID от
кого мы получаем сообщение Тема
сообщения и дата со временем нас здесь
интересует айдишник по нему мы сейчас
получим текст письма создадим новый
список для айдишников
пробегаемся по списку наполненному
словарем или словарями и парсим их ключи
со значениями
если есть ключ со значением ID
забираем его значение и кладем в
созданный нами ранее список
выведем какой-то информационный Принт
что мы получили столько-то сообщений
Напоминаю что какова будет длина списка
со словарями столько сообщений мы имеем
далее создадим директорию в которой
будем сохранять сообщение получим
значение текущей директории
пробрасываем до нее путь
и напишем небольшое условие проверки что
если директории по данному пути не
существует
то создаем ее
[музыка]
время получать информацию из писем
пробегаемся по списку с айдишниками
которые мы наполнили выше
и отправляем запрос на новый адрес
[музыка]
[музыка]
Обратите внимание меняется параметр
Action
а также добавляется параметр ID в
который мы подставляем ID сообщения
отправляем запрос
[музыка]
и получаем json
в котором будут нужные нам письма с
информацией включая отправителя тему
время отправки сообщения и конечно
нужный нам текст заберем данный из
словаря по ключам отправитель тема дата
и текст
[музыка]
[музыка]
нам осталось сохранить информацию файл
обозначим путь до файла
и чтобы наверняка избежать перезаписи
будем сохранять под ID сообщения
открываем файл на запись
[музыка]
и записываем данный файл
[музыка]
[музыка]
[музыка]
отправим запрос капе и залогинимся
[музыка]
[музыка]
а после добавим вызов нашей функции в
цикл wild.ru
хоть почта и удаляется через час Давайте
допишем функцию Delete mail и будем
использовать её при завершении программы
тем самым удаляя созданную и
использованную почту принимать она также
будет один параметр email нам нужно
отправить пост запрос на следующий URL а
также использовать следующий Пилот с
данными в экшен у нас будет delete
mailbox
а также логин и domain имя которые
забираем как и ранее из почтового адреса
[музыка]
отправляем пост запрос
[музыка]
и выведем какой-то информационный принт
[музыка]
после чего добавим вызов функции в
except
[музыка]
наш код готов Давайте тестировать
запускаем скрипт получаем email адрес и
Давайте пробовать Отправить сообщение
[музыка]
ушло
и спустя пару итераций получаем
информацию что у нас есть одно входящее
также Обратите внимание в директории
проекта появилась директория All Mails в
которой сохраняются текстовые файлы
Давайте попробуем отправить еще одно
сообщение
и получаем Принт о том что теперь у нас
два входящих посмотрим сохранились ли
данные и красота отправитель получатель
тема сообщения Data и самая важная текст
в котором содержались одноразовые пароли
для регистрации красота Надеюсь видео
было вам полезным интересным и вы узнали
что-то новое и если хотите больше
практики и роликов по пайтам Не забудьте
поставить свой лайк и поделиться мнением
или идеями в комментариях Ведь так я
понимаю что не зря выкладываю ролики
друзья огромное вам спасибо за просмотр
подписывайтесь на канал Будьте здоровы
Всем пока
